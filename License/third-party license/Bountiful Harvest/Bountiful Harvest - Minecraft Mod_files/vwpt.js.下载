/*!
 * 
 * @preserve
 * version: 2.0.18
 * date: 2025-01-16T09:03:52.147Z
 * branch: master
 * commit: 2ae3defdc778a0a43426958ac7958dbe18e32518
 */(()=>{var t={723:(t,n,i)=>{"use strict";i.d(n,{Z:()=>o});const o={adServerUrl:["https://wserver.vidazoo.com","https://wserver2.vidazoo.com"],cdnGatewayReadUrl:["https://cdn-gateway.vidazoo.com"],cdnGatewayWriteUrl:["https://cdn-gateway-w.vidazoo.com"]}},224:()=>{let t=window.onerror;window.onerror=function(n,i,o,s,a){try{let t=navigator?navigator.userAgent:"";if(i&&i.indexOf("vidazoo")>-1&&(i.indexOf("vwpt")>-1||i.indexOf("/basev/wgt/")>-1)&&"Script error"!=n&&": "!=n&&"Script error."!=n&&-1==t.indexOf("http://www.apple.com/go/applebot")){const c=new XMLHttpRequest;c.open("POST","https://pl.vidazoo.com/report/",!0),c.setRequestHeader("Content-Type","application/json"),50==Math.floor(101*Math.random())&&c.send(JSON.stringify({name:"Uncaught Widget Error",data:{pageUrl:document.URL,e:a?a.stack:n,ua:t,message:n,url:i,line:o,col:s}}))}}catch(t){console.error(t)}t&&t.apply(window,arguments)}},207:(t,n,i)=>{"use strict";var o=i(366),s=o(i(675)),a=o(i(860));t.exports=function(t){return new Promise((function(n,i){window.requestAnimationFrame((0,a.default)(s.default.mark((function e(){return s.default.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(1<=t.length)){o.next=4;break}t(n,i),o.next=15;break;case 4:return o.prev=4,o.t0=n,o.next=8,t();case 8:o.t1=o.sent,(0,o.t0)(o.t1),o.next=15;break;case 12:o.prev=12,o.t2=o.catch(4),i(o.t2);case 15:case"end":return o.stop()}}),e,null,[[4,12]])}))))}))}},630:()=>{!function(t){var n="currentScript",i=t.getElementsByTagName("script");n in t||Object.defineProperty(t,n,{get:function(){try{throw new Error}catch(o){var t,n=(/.*at [^\(]*\((.*):.+:.+\)$/gi.exec(o.stack)||[!1])[1];for(t in i)if(i[t].src==n||"interactive"==i[t].readyState)return i[t];return null}}})}(document)},860:t=>{function asyncGeneratorStep(t,n,i,o,s,a,c){try{var d=t[a](c),l=d.value}catch(t){return void i(t)}d.done?n(l):Promise.resolve(l).then(o,s)}t.exports=function _asyncToGenerator(t){return function(){var n=this,i=arguments;return new Promise((function(o,s){var a=t.apply(n,i);function _next(t){asyncGeneratorStep(a,o,s,_next,_throw,"next",t)}function _throw(t){asyncGeneratorStep(a,o,s,_next,_throw,"throw",t)}_next(void 0)}))}},t.exports.__esModule=!0,t.exports.default=t.exports},366:t=>{t.exports=function _interopRequireDefault(t){return t&&t.__esModule?t:{default:t}},t.exports.__esModule=!0,t.exports.default=t.exports},658:(t,n,i)=>{var o=i(47).default;function _regeneratorRuntime(){"use strict";/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */t.exports=_regeneratorRuntime=function _regeneratorRuntime(){return i},t.exports.__esModule=!0,t.exports.default=t.exports;var n,i={},s=Object.prototype,a=s.hasOwnProperty,c=Object.defineProperty||function(t,n,i){t[n]=i.value},d="function"==typeof Symbol?Symbol:{},l=d.iterator||"@@iterator",u=d.asyncIterator||"@@asyncIterator",h=d.toStringTag||"@@toStringTag";function define(t,n,i){return Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}),t[n]}try{define({},"")}catch(n){define=function define(t,n,i){return t[n]=i}}function wrap(t,n,i,o){var s=n&&n.prototype instanceof Generator?n:Generator,a=Object.create(s.prototype),d=new Context(o||[]);return c(a,"_invoke",{value:makeInvokeMethod(t,i,d)}),a}function tryCatch(t,n,i){try{return{type:"normal",arg:t.call(n,i)}}catch(t){return{type:"throw",arg:t}}}i.wrap=wrap;var p="suspendedStart",g="suspendedYield",f="executing",_="completed",m={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var w={};define(w,l,(function(){return this}));var y=Object.getPrototypeOf,v=y&&y(y(values([])));v&&v!==s&&a.call(v,l)&&(w=v);var b=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(w);function defineIteratorMethods(t){["next","throw","return"].forEach((function(n){define(t,n,(function(t){return this._invoke(n,t)}))}))}function AsyncIterator(t,n){function invoke(i,s,c,d){var l=tryCatch(t[i],t,s);if("throw"!==l.type){var u=l.arg,h=u.value;return h&&"object"==o(h)&&a.call(h,"__await")?n.resolve(h.__await).then((function(t){invoke("next",t,c,d)}),(function(t){invoke("throw",t,c,d)})):n.resolve(h).then((function(t){u.value=t,c(u)}),(function(t){return invoke("throw",t,c,d)}))}d(l.arg)}var i;c(this,"_invoke",{value:function value(t,o){function callInvokeWithMethodAndArg(){return new n((function(n,i){invoke(t,o,n,i)}))}return i=i?i.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(t,i,o){var s=p;return function(a,c){if(s===f)throw new Error("Generator is already running");if(s===_){if("throw"===a)throw c;return{value:n,done:!0}}for(o.method=a,o.arg=c;;){var d=o.delegate;if(d){var l=maybeInvokeDelegate(d,o);if(l){if(l===m)continue;return l}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(s===p)throw s=_,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);s=f;var u=tryCatch(t,i,o);if("normal"===u.type){if(s=o.done?_:g,u.arg===m)continue;return{value:u.arg,done:o.done}}"throw"===u.type&&(s=_,o.method="throw",o.arg=u.arg)}}}function maybeInvokeDelegate(t,i){var o=i.method,s=t.iterator[o];if(s===n)return i.delegate=null,"throw"===o&&t.iterator.return&&(i.method="return",i.arg=n,maybeInvokeDelegate(t,i),"throw"===i.method)||"return"!==o&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+o+"' method")),m;var a=tryCatch(s,t.iterator,i.arg);if("throw"===a.type)return i.method="throw",i.arg=a.arg,i.delegate=null,m;var c=a.arg;return c?c.done?(i[t.resultName]=c.value,i.next=t.nextLoc,"return"!==i.method&&(i.method="next",i.arg=n),i.delegate=null,m):c:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,m)}function pushTryEntry(t){var n={tryLoc:t[0]};1 in t&&(n.catchLoc=t[1]),2 in t&&(n.finallyLoc=t[2],n.afterLoc=t[3]),this.tryEntries.push(n)}function resetTryEntry(t){var n=t.completion||{};n.type="normal",delete n.arg,t.completion=n}function Context(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(pushTryEntry,this),this.reset(!0)}function values(t){if(t||""===t){var i=t[l];if(i)return i.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var s=-1,c=function next(){for(;++s<t.length;)if(a.call(t,s))return next.value=t[s],next.done=!1,next;return next.value=n,next.done=!0,next};return c.next=c}}throw new TypeError(o(t)+" is not iterable")}return GeneratorFunction.prototype=GeneratorFunctionPrototype,c(b,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),c(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,h,"GeneratorFunction"),i.isGeneratorFunction=function(t){var n="function"==typeof t&&t.constructor;return!!n&&(n===GeneratorFunction||"GeneratorFunction"===(n.displayName||n.name))},i.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,GeneratorFunctionPrototype):(t.__proto__=GeneratorFunctionPrototype,define(t,h,"GeneratorFunction")),t.prototype=Object.create(b),t},i.awrap=function(t){return{__await:t}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,u,(function(){return this})),i.AsyncIterator=AsyncIterator,i.async=function(t,n,o,s,a){void 0===a&&(a=Promise);var c=new AsyncIterator(wrap(t,n,o,s),a);return i.isGeneratorFunction(n)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},defineIteratorMethods(b),define(b,h,"Generator"),define(b,l,(function(){return this})),define(b,"toString",(function(){return"[object Generator]"})),i.keys=function(t){var n=Object(t),i=[];for(var o in n)i.push(o);return i.reverse(),function next(){for(;i.length;){var t=i.pop();if(t in n)return next.value=t,next.done=!1,next}return next.done=!0,next}},i.values=values,Context.prototype={constructor:Context,reset:function reset(t){if(this.prev=0,this.next=0,this.sent=this._sent=n,this.done=!1,this.delegate=null,this.method="next",this.arg=n,this.tryEntries.forEach(resetTryEntry),!t)for(var i in this)"t"===i.charAt(0)&&a.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=n)},stop:function stop(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function dispatchException(t){if(this.done)throw t;var i=this;function handle(o,s){return c.type="throw",c.arg=t,i.next=o,s&&(i.method="next",i.arg=n),!!s}for(var o=this.tryEntries.length-1;o>=0;--o){var s=this.tryEntries[o],c=s.completion;if("root"===s.tryLoc)return handle("end");if(s.tryLoc<=this.prev){var d=a.call(s,"catchLoc"),l=a.call(s,"finallyLoc");if(d&&l){if(this.prev<s.catchLoc)return handle(s.catchLoc,!0);if(this.prev<s.finallyLoc)return handle(s.finallyLoc)}else if(d){if(this.prev<s.catchLoc)return handle(s.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<s.finallyLoc)return handle(s.finallyLoc)}}}},abrupt:function abrupt(t,n){for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i];if(o.tryLoc<=this.prev&&a.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var s=o;break}}s&&("break"===t||"continue"===t)&&s.tryLoc<=n&&n<=s.finallyLoc&&(s=null);var c=s?s.completion:{};return c.type=t,c.arg=n,s?(this.method="next",this.next=s.finallyLoc,m):this.complete(c)},complete:function complete(t,n){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&n&&(this.next=n),m},finish:function finish(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.finallyLoc===t)return this.complete(i.completion,i.afterLoc),resetTryEntry(i),m}},catch:function _catch(t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc===t){var o=i.completion;if("throw"===o.type){var s=o.arg;resetTryEntry(i)}return s}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(t,i,o){return this.delegate={iterator:values(t),resultName:i,nextLoc:o},"next"===this.method&&(this.arg=n),m}},i}t.exports=_regeneratorRuntime,t.exports.__esModule=!0,t.exports.default=t.exports},47:t=>{function _typeof(n){return t.exports=_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,_typeof(n)}t.exports=_typeof,t.exports.__esModule=!0,t.exports.default=t.exports},675:(t,n,i)=>{var o=i(658)();t.exports=o;try{regeneratorRuntime=o}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=o:Function("r","regeneratorRuntime = r")(o)}}},n={};function __webpack_require__(i){var o=n[i];if(void 0!==o)return o.exports;var s=n[i]={exports:{}};return t[i](s,s.exports,__webpack_require__),s.exports}__webpack_require__.d=(t,n)=>{for(var i in n)__webpack_require__.o(n,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})},__webpack_require__.o=(t,n)=>Object.prototype.hasOwnProperty.call(t,n),(()=>{"use strict";__webpack_require__(224);var extendStatics=function(t,n){return extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},extendStatics(t,n)};function __extends(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function __(){this.constructor=t}extendStatics(t,n),t.prototype=null===n?Object.create(n):(__.prototype=n.prototype,new __)}var tslib_es6_assign=function(){return tslib_es6_assign=Object.assign||function __assign(t){for(var n,i=1,o=arguments.length;i<o;i++)for(var s in n=arguments[i])Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s]);return t},tslib_es6_assign.apply(this,arguments)};function __decorate(t,n,i,o){var s,a=arguments.length,c=a<3?n:null===o?o=Object.getOwnPropertyDescriptor(n,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)c=Reflect.decorate(t,n,i,o);else for(var d=t.length-1;d>=0;d--)(s=t[d])&&(c=(a<3?s(c):a>3?s(n,i,c):s(n,i))||c);return a>3&&c&&Object.defineProperty(n,i,c),c}function tslib_es6_awaiter(t,n,i,o){return new(i||(i=Promise))((function(s,a){function fulfilled(t){try{step(o.next(t))}catch(t){a(t)}}function rejected(t){try{step(o.throw(t))}catch(t){a(t)}}function step(t){t.done?s(t.value):function adopt(t){return t instanceof i?t:new i((function(n){n(t)}))}(t.value).then(fulfilled,rejected)}step((o=o.apply(t,n||[])).next())}))}function tslib_es6_generator(t,n){var i,o,s,a,c={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return a={next:verb(0),throw:verb(1),return:verb(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function verb(d){return function(l){return function step(d){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,d[0]&&(c=0)),c;)try{if(i=1,o&&(s=2&d[0]?o.return:d[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,d[1])).done)return s;switch(o=0,s&&(d=[2&d[0],s.value]),d[0]){case 0:case 1:s=d;break;case 4:return c.label++,{value:d[1],done:!1};case 5:c.label++,o=d[1],d=[0];continue;case 7:d=c.ops.pop(),c.trys.pop();continue;default:if(!(s=c.trys,(s=s.length>0&&s[s.length-1])||6!==d[0]&&2!==d[0])){c=0;continue}if(3===d[0]&&(!s||d[1]>s[0]&&d[1]<s[3])){c.label=d[1];break}if(6===d[0]&&c.label<s[1]){c.label=s[1],s=d;break}if(s&&c.label<s[2]){c.label=s[2],c.ops.push(d);break}s[2]&&c.ops.pop(),c.trys.pop();continue}d=n.call(t,c)}catch(t){d=[6,t],o=0}finally{i=s=0}if(5&d[0])throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}([d,l])}}}Object.create;function tslib_es6_read(t,n){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,s,a=i.call(t),c=[];try{for(;(void 0===n||n-- >0)&&!(o=a.next()).done;)c.push(o.value)}catch(t){s={error:t}}finally{try{o&&!o.done&&(i=a.return)&&i.call(a)}finally{if(s)throw s.error}}return c}function __spreadArray(t,n,i){if(i||2===arguments.length)for(var o,s=0,a=n.length;s<a;s++)!o&&s in n||(o||(o=Array.prototype.slice.call(n,0,s)),o[s]=n[s]);return t.concat(o||Array.prototype.slice.call(n))}Object.create;"function"==typeof SuppressedError&&SuppressedError;var t;function filterLogLevel(t){return function(n,i,o){var s=o.value;o.value=function(){this.logLevel>=t&&s.apply(this,arguments)}}}!function(t){t[t.Silent=-1]="Silent",t[t.Error=0]="Error",t[t.Warn=1]="Warn",t[t.Info=2]="Info",t[t.Debug=3]="Debug"}(t||(t={}));const n=function(){function Logger(t,n){void 0===n&&(n=""),this.logLevel=t,this.namespace=n}return Object.defineProperty(Logger.prototype,"currentLogLevel",{get:function(){return this.logLevel},enumerable:!1,configurable:!0}),Logger.prototype.setLogLevel=function(t){return this.logLevel=t,this},Logger.prototype.setNamespace=function(t){return this.namespace=t,this},Logger.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.invokeLogMethod("info",t,"rebeccapurple")},Logger.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.invokeLogMethod("debug",t,"green")},Logger.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.invokeLogMethod("warn",t,"yellow")},Logger.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.invokeLogMethod("error",t,"red")},Logger.prototype.time=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];console.time.apply(console,__spreadArray([],tslib_es6_read(t),!1))},Logger.prototype.timeEnd=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];console.timeEnd.apply(console,__spreadArray([],tslib_es6_read(t),!1))},Logger.prototype.invokeLogMethod=function(t,n,i){n=__spreadArray(["%c".concat((new Date).toLocaleTimeString()," %c").concat(t.toUpperCase(),"%c ").concat(this.namespace," "),"color: gray","background-color: ".concat(i,"; color: white; border-radius: 2px 0 0 2px; padding: 2px; font-weight: bold;"),"border: solid 1px ".concat(i,"; padding: 1px; border-radius: 0 2px 2px 0;")],tslib_es6_read(n),!1),console[t].apply(console,__spreadArray([],tslib_es6_read(n),!1))},__decorate([filterLogLevel(t.Info)],Logger.prototype,"info",null),__decorate([filterLogLevel(t.Debug)],Logger.prototype,"debug",null),__decorate([filterLogLevel(t.Warn)],Logger.prototype,"warn",null),__decorate([filterLogLevel(t.Error)],Logger.prototype,"error",null),__decorate([filterLogLevel(t.Debug)],Logger.prototype,"time",null),__decorate([filterLogLevel(t.Debug)],Logger.prototype,"timeEnd",null),Logger}();__webpack_require__(630);function isFrameContext(){try{return window.top!==window}catch(t){return!0}}function getCurrentFrameElement(t){void 0===t&&(t=document);try{return t.defaultView&&t.defaultView.frameElement}catch(t){return null}}function getTopFrameElement(t,n){if(void 0===t&&(t=getCurrentFrameElement()),void 0===n&&(n=0),n>=5)return t;var i=getCurrentFrameElement(t.ownerDocument);return i?getTopFrameElement(i,n+1):t}function getTopWindow(){var t=window;try{for(;t!==window.parent;)window.parent.document.URL,t=window.parent}catch(t){}return t}function getDomainFromUrl(t){return(t||"").replace("http://","").replace("https://","").split(/[/?#]/)[0]}function getTopPageUrl(){var t=getTopWindow(),n="";try{n=t!==top&&t.document.referrer||document.URL}catch(t){n=document.referrer||document.URL}return n}function createDocumentHeightResolver(t){var n;function getHeight(){return Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.body.offsetHeight,t.documentElement.offsetHeight,t.body.clientHeight,t.documentElement.clientHeight)}function resizeHandler(){n=getHeight()}return t=t||document,window.addEventListener("resize",resizeHandler,{passive:!0}),{resolve:function(){return n||(n=getHeight()),n},dispose:function(){window.removeEventListener("resize",resizeHandler)}}}var i=["loading","interactive","complete"];function documentReadyState(t,n){function isReady(){return i.indexOf(n.readyState)>=i.indexOf(t)}return void 0===n&&(n=document),new Promise((function(t){if(isReady())t();else{var onReadyStateChange_1=function(){isReady()&&(n.removeEventListener("readystatechange",onReadyStateChange_1),t())};n.addEventListener("readystatechange",onReadyStateChange_1)}}))}Symbol("ref");var o="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";function strings_guid(t){void 0===t&&(t=8);for(var n="",i=0;i<t;i++)n+=o.charAt(Math.floor(Math.random()*o.length));return n}function startsWith(t,n){return!!n&&t.substr(0,n.length)===n}function isEmptyOrBlank(t){return!t||0===t.trim().length}function parseQueryString(t){return void 0===t&&(t=""),t.indexOf("?")>-1&&(t=t.split("?")[1]),t?t.split("&").reduce((function(t,n){var i=tslib_es6_read(n.split("="),2),o=i[0],s=i[1];if(function endsWith(t,n){return t.substr(-n.length)===n}(o=decodeURIComponent(o),"[]")){var a=o.substr(0,o.length-2);t[a]||(t[a]=[]),t[a].push(decodeURIComponent(s))}else t[o]=decodeURIComponent(s);return t}),{}):{}}function injectScript(t,n,i,o,s){return void 0===n&&(n=""),void 0===i&&(i=document.head),void 0===s&&(s=!1),new Promise((function(a,c){(o=o||document.createElement("script")).id=n,o.src=t,o.addEventListener("load",a),o.addEventListener("error",c),s&&i.prepend?i.prepend(o):i.appendChild(o)}))}const s=new n(t.Silent);function assert_isDefined(t){return void 0!==t}function assert_isNumber(t){return!isNaN(t)&&"number"==typeof t}const a=function(){function EventDispatcher(){this._eventTarget=document.createElement("a")}return Object.defineProperty(EventDispatcher.prototype,"requestHandler",{set:function(t){this._requestHandler=t},enumerable:!1,configurable:!0}),EventDispatcher.prototype.on=function(t,n,i){this._eventTarget.addEventListener(t,n,i)},EventDispatcher.prototype.un=function(t,n,i){this._eventTarget.removeEventListener(t,n,i)},EventDispatcher.prototype.dispatch=function(t,n){this._eventTarget.dispatchEvent(new CustomEvent(t,{detail:n}))},EventDispatcher.prototype.request=function(t,n){return this._requestHandler&&function isFunction(t){return t&&"function"==typeof t}(this._requestHandler)?this._requestHandler(t,n):null},EventDispatcher}();const c=function(){function TimeMarks(){this._marks={"page-load":0}}return TimeMarks.prototype.setMark=function(t,n,i){!i&&this.hasMark(t)||(this._marks[t]=Math.round(n||window.performance.now()))},TimeMarks.prototype.hasMark=function(t){return assert_isDefined(this._marks[t])},TimeMarks.prototype.getMarksDiff=function(t,n){var i=this._marks[t],o=this._marks[n];return assert_isNumber(i)&&assert_isNumber(o)?Math.abs(i-o):-1},TimeMarks}();__webpack_require__(207);function flatten(t,n){void 0===n&&(n=[]);for(var i=0,o=t.length;i<o;i++)t[i]instanceof Array?flatten(t[i],n):n.push(t[i]);return n}function wait(t){return new Promise((function(n){return setTimeout(n,t)}))}var d=function(t){function AsyncAction(){return null!==t&&t.apply(this,arguments)||this}return __extends(AsyncAction,t),AsyncAction}(a),l=function(t){function InlineAsyncAction(n){var i=t.call(this)||this;return i._asyncFn=n,i}return __extends(InlineAsyncAction,t),InlineAsyncAction.prototype.execute=function(){return this._asyncFn()},InlineAsyncAction}(d),u=function(){function AsyncSaga(t){this._actions=t}return AsyncSaga.compose=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return new AsyncSaga(t)},AsyncSaga.prototype.execSeries=function(t){return tslib_es6_awaiter(this,void 0,void 0,(function(){var n,i;return tslib_es6_generator(this,(function(o){switch(o.label){case 0:n=[],i=t,o.label=1;case 1:return this._actions.length?[4,this._actions.shift().execute(i)]:[3,3];case 2:return i=o.sent(),n.push(i),[3,1];case 3:return[2,n]}}))}))},AsyncSaga.prototype.execParallel=function(t){return Promise.all(this._actions.map((function(n){return n.execute(t)}))).then(flatten)},AsyncSaga.prototype.toSeriesAsyncAction=function(){return this.toAsyncAction({series:!0})},AsyncSaga.prototype.toParallelAsyncAction=function(){return this.toAsyncAction({series:!1})},AsyncSaga.prototype.toAsyncAction=function(t){var n=this;return void 0===t&&(t={}),{isSaga:!0,execute:function(i){return t.series?n.execSeries(i):n.execParallel(i)}}},AsyncSaga}();function randomInt(t,n){void 0===t&&(t=1),void 0===n&&(n=0);var i=Math.ceil(Math.min(t,n)),o=Math.floor(Math.max(t,n));return Math.floor(i+Math.random()*(o-i+1))}function isValidRandom(t){return randomInt(1,t)===t}function noop(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n]}var h="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";function b64_encode(t){var n,i,o,s,a,c=0,d="";if(!t)return t;do{n=(s=t[c++]<<16|t[c++]<<8|t[c++])>>12&63,i=s>>6&63,o=63&s,d+=h.charAt(s>>18&63)+h.charAt(n)+h.charAt(i)+h.charAt(o)}while(c<t.length);return((a=t.length%3)?d.slice(0,a-3):d)+"===".slice(a||3)}function keyCharAt(t,n){return t.charCodeAt(Math.floor(n%t.length))}function generatePassword(t){for(var n="abcdefghijklnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",i="",o=0;o<t;o++)i+=n.charAt(Math.floor(61*Math.random()));return i}var p=function(){function XORCipher(){}return XORCipher.encode=function(t,n){return n=function xor_encrypt(t,n){return Array.prototype.map.call(n,(function(n,i){return n.charCodeAt(0)^keyCharAt(t,i)}))}(t,n),b64_encode(n)},XORCipher.decode=function(t,n){return function xor_decrypt(t,n){return(n||[]).map((function(n,i){return String.fromCharCode(n^keyCharAt(t,i))})).join("")}(t,n=function b64_decode(t){var n,i,o,s,a,c,d=0,l=[];if(!t)return t;t+="";do{n=(c=h.indexOf(t.charAt(d++))<<18|h.indexOf(t.charAt(d++))<<12|(s=h.indexOf(t.charAt(d++)))<<6|(a=h.indexOf(t.charAt(d++))))>>16&255,i=c>>8&255,o=255&c,l.push(n),64!==s&&(l.push(i),64!==a&&l.push(o))}while(d<t.length);return l}(n))},XORCipher}();const g=function(){function Coder(){}return Coder.encode=function(t){var n=randomInt(12,20),i=generatePassword(n),o=p.encode(i,JSON.stringify(t));return generatePassword(3)+n+i+o},Coder.encodeBase64=function(t){return b64_encode(t)},Coder.decode=function(t){var n;try{var i=parseInt(t.substr(3,2));n=JSON.parse(p.decode(t.slice(5,i+5),t.slice(5+i)))}catch(t){n=null}return n},Coder.encodeAsync=function(t){var n=this;return new Promise((function(i){setTimeout((function(){return i(n.encode(t))}),0)}))},Coder.decodeAsync=function(t){var n=this;return new Promise((function(i){setTimeout((function(){return i(n.decode(t))}),0)}))},Coder}();function getPlayerSize(t,n,i){void 0===n&&(n=16/9),void 0===i&&(i="floor");var o=t;return{width:o,height:Math[i](o/n)}}function dimensions_rectOf(t){return t.getBoundingClientRect()}function r(t){return t.map((function(t){return String.fromCharCode(t).trim()})).join("")}r([88,77,76,72,116,116,112,82,101,113,117,101,115,116]),r([111,112,101,110]),r([115,101,110,100]);function postUrlEncoded(t,n,i,o){return new Promise((function(s,a){var c=new XMLHttpRequest;c.open("POST",t,!0),i&&(c.timeout=i),o&&(c.withCredentials=!0),c.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var d=null;n&&(d=function stringifyQueryString(t){return Object.keys(t).reduce((function(n,i){if(t[i]instanceof Array)for(var o=0,s=t[i].length;o<s;o++)n.push("".concat(i,"[]=").concat(decodeURIComponent(t[i][o])));else n.push("".concat(i,"=").concat(encodeURIComponent(t[i])));return n}),[]).join("&")}(n)),c.addEventListener("readystatechange",(function(){c.readyState===XMLHttpRequest.DONE&&(c.status<400&&c.status>=200?s(c):a(c))})),c.send(d)}))}function post(t,n,i,o,s){return void 0===i&&(i=!0),new Promise((function(a,c){var d=new XMLHttpRequest;d.open("POST",t,!0),o&&(d.timeout=o),s&&(d.withCredentials=!0),i&&(d.setRequestHeader("Content-Type","application/json"),n=JSON.stringify(n)),d.addEventListener("readystatechange",(function(){d.readyState===XMLHttpRequest.DONE&&(d.status<400&&d.status>=200?a(i&&d.responseText?JSON.parse(d.responseText):d.responseText):c(d))})),d.send(n)}))}function get(t,n,i){return void 0===n&&(n=!0),new Promise((function(o,s){var a=new XMLHttpRequest;a.open("GET",t,!0),i&&(a.timeout=i),a.addEventListener("timeout",(function(){s("TIMEOUT")})),a.addEventListener("error",(function(){s(a)})),a.addEventListener("load",(function(){a.status<400&&a.status>=200?o(n&&a.responseText?JSON.parse(a.responseText):a.responseText):s(a)})),a.send(null)}))}function getWithFallback(t,n,i,o,s){return void 0===n&&(n=!0),void 0===s&&(s={}),tslib_es6_awaiter(this,void 0,void 0,(function(){var a,c;return tslib_es6_generator(this,(function(d){switch(d.label){case 0:a=i instanceof Array?i.shift():i,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,get(t.shift(),n,a)];case 2:return[2,d.sent()];case 3:if(c=d.sent(),null==o||o(c),t.length)return i&&s.firstRequestTimeout&&(i=0),[2,getWithFallback(t,n,i,o)];throw c;case 4:return[2]}}))}))}function postWithFallback(t,n,i,o,s){return void 0===i&&(i=!0),tslib_es6_awaiter(this,void 0,void 0,(function(){var a,c;return tslib_es6_generator(this,(function(d){switch(d.label){case 0:a=o instanceof Array?o.shift():o,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,post(t.shift(),n,i,a)];case 2:return[2,d.sent()];case 3:if(c=d.sent(),null==s||s(c),t.length)return[2,postWithFallback(t,n,i,o,s)];throw c;case 4:return[2]}}))}))}function _loadWorker(){return tslib_es6_awaiter(this,void 0,void 0,(function(){var t;return tslib_es6_generator(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,get("https://static.vidazoo.com/basev/wgt/atlas/1.0.0/widget.js",!1)];case 1:return t=n.sent(),[2,new Worker("data:text/javascript;base64,".concat(btoa(t)))];case 2:return n.sent(),[2,null];case 3:return[2]}}))}))}window.__vdzworkers__=window.__vdzworkers__||{};const f=new(function(){function AtlasService(){this._requests={},this._onMessage=this._onMessage.bind(this)}return AtlasService.prototype._onMessage=function(t){var n=t.data,i=n.id,o=n.response;if("function"==typeof this._requests[i]){var s=this._requests[i];delete this._requests[i],s(o)}},AtlasService.prototype._getWorker=function(){return tslib_es6_awaiter(this,void 0,void 0,(function(){var t=this;return tslib_es6_generator(this,(function(n){return this._worker||null===this._worker?[2,Promise.resolve(this._worker)]:(window.__vdzworkers__.__atlas__||(window.__vdzworkers__.__atlas__=new Promise((function(n){return tslib_es6_awaiter(t,void 0,void 0,(function(){var t;return tslib_es6_generator(this,(function(i){switch(i.label){case 0:return[4,_loadWorker()];case 1:return t=i.sent(),n(t),[2]}}))}))}))),[2,window.__vdzworkers__.__atlas__.then((function(n){t._worker=n,t._worker&&t._worker.addEventListener("message",t._onMessage)}))])}))}))},AtlasService.prototype.decode=function(t){return tslib_es6_awaiter(this,void 0,void 0,(function(){var n;return tslib_es6_generator(this,(function(i){switch(i.label){case 0:return[4,this._getWorker()];case 1:return(n=i.sent())?[2,this._requestAction(n,"decode",t)]:[2,g.decodeAsync(t)]}}))}))},AtlasService.prototype.encode=function(t){return tslib_es6_awaiter(this,void 0,void 0,(function(){var n;return tslib_es6_generator(this,(function(i){switch(i.label){case 0:return[4,this._getWorker()];case 1:return(n=i.sent())?[2,this._requestAction(n,"encode",t)]:[2,g.encodeAsync(t)]}}))}))},AtlasService.prototype._requestAction=function(t,n,i){var o=this;return new Promise((function(s){var a=strings_guid();o._requests[a]=s,t.postMessage({type:n,id:a,payload:i})}))},AtlasService}()),_={silent:t.Silent,error:t.Error,warn:t.Warn,info:t.Info,debug:t.Debug},m=["checkDMode"],w=["outstream-prebid-mobile","prebid-native","mercury","hermes","prebid-npx","odin","orion","callisto"],y=["odin","orion"],v="551424a21b1b1f08006fb6f9",b={"outstream-prebid-mobile":"2.2.1"},S=`https://bis${randomInt(1,6)}.vidazoo.com/event/extend`;const E=new class BIService{constructor(){this._jsonParams=void 0,this._jsonParams={}}extendGlobalJSONParams(t){this._jsonParams={...this._jsonParams,...t}}async sendEvent(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4?arguments[4]:void 0;if(s.debug(`BI Event: '${t}'x${i} ~${o}`),o&&(i=parseFloat(i)*o),o>1&&!isValidRandom(o))return;const c=getDomainFromUrl(getTopPageUrl());let d,l,u;if(a&&a.conf&&a.conf.device&&(l=a.conf.device.os?.name??"",d=a.conf.device.browser?.name+"_"+parseInt(a.conf.device.browser?.version)),a?.conf?.json||this._jsonParams)try{const t={...a?.conf?.json,...this._jsonParams};Object.keys(t).length&&(u=JSON.stringify({...a?.conf?.json,...this._jsonParams}))}catch(t){}const h={name:t,domain:c,counter:i,vertical:"platform",browser:d,os:l,params:u,...a?.params,...n},p={trace:await f.encode(h)};return postUrlEncoded(S,p)}};const x=new class ReportService{async report(t,n){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(i&&!isValidRandom(i))return;(n=n||{}).ua=navigator?navigator.userAgent:"";let o={name:t,data:n};post("https://pl.vidazoo.com/report/",{trace:await f.encode(o)}).catch(noop)}},P="https://img.vidazoo.com";const I={artemis:function ArtemisWidgetHandler(t,n){let i;if(!t.hasPlaceholder||!(i=n?.cms?.results[0]?.poster))return;const o=assert_isDefined(n.widget.options.widgetPosition)&&n.widget.options.widgetPosition!==t.options.get("widgetPosition");if(n.widgetVersion.version<"1.9.21"||o)return void t.removePlaceholder();const{width:s,height:a}=t.placeholder.getBoundingClientRect();t.placeholder.style.backgroundImage=`url(${function cropImage(t,n,i){let o=`${P}/api/crop?url=${encodeURIComponent(t)}`;return n&&(o+=`&width=${n}`),i&&(o+=`&height=${i}`),o}(i,s,a)})`,t.placeholder.style.backgroundSize="cover",t.placeholder.style.backgroundPosition="center"}},L=["outstream-prebid-mobile","parse-outstream-prebid-mobile"],tryDecodeURIComponent=t=>{try{return decodeURIComponent(t)}catch(n){return t}},isObject=t=>"object"==typeof t&&"[object Object]"===t.toString();let A=function(t){return t.ADS="ads",t.CMS="cms",t}({});class EmptyServerResponseError extends Error{constructor(){super("EMPTY_SERVER_RESPONSE")}}class BadServerResponseError extends Error{constructor(t){super("BAD_SERVER_RESPONSE"),this.code=t}}class FetchWidgetDataAsyncAction extends d{constructor(t,n,i,o,s){super(),this._serverUrl=t,this._params=n,this._parent=i,this._didLoadTooFrequently=o,this._publisherTag=s,this._currentRequestParams=void 0,this._retryCount=void 0,this._initialEmptyResponseSent=void 0,this._staticCampaignFallbackEventSent=void 0,this._fetchFromCDN=void 0,this._retryCount=0,this._fetchFromCDN=!1,this._onError=this._onError.bind(this)}get _storageKey(){return`vdzwc_${this._params.widgetId}`}get _forceWidgetIdStorageKey(){return`vdzwf_${this._params.widgetId}`}async execute(){const{vdzwLocalCache:t}=this._params;let n=t?await this._tryLoadDataFromStorage():null,i=!1;if(n){s.debug("Widget data loaded from local storage.");const t=n.ads;i=t?.trace?.length>0,E.sendEvent("widgetServerLoadCache",{widget:n.widget._id},1,1,t)}else{this._currentRequestParams=await this._createRequestParams(),n=await this._loadDataFromRemote(),n.widget.options=await this._parseWidgetOptions(n.widget.options),n.widget.useForceWidgetId&&window.sessionStorage.setItem(this._forceWidgetIdStorageKey,n.widget._id);const t=n.ads;i=t?.trace?.length>0,t.conf.json=t.conf.json||{};const o=this._publisherTag.currentScript.dataset.rev;o&&(t.conf.json.vwptRevision=o),this._fetchFromCDN&&(t.conf.json.vwptStaticCampaign=!0);const s=t?.params?.playerId??"";n.playerId=s,this._params.gdprEnforcement&&false!==t.conf.geo.isEU&&(E.sendEvent("widgetEuropeMismatch"+(t.conf.geo.isEU?"True":"False"),{userId:n.widget.user,playerId:n.widget._id,widget:n.widget._id},1,100),x.report("widgetEuropeMismatch",{geo:t.conf.geo,clientIp:t.platform.ip,isEu:false},100)),this._shouldPersistWidgetData(n)&&this._persistWidgetData(n)}n.adsData=n.ads;const o=b[n.widget.type];return o&&o>=n.widgetVersion.version&&(n.ads=await f.encode(n.ads)),n?.cms?.results?.length>0&&(n.cms.results=n.cms.results.map((t=>(t.title&&(t.title=tryDecodeURIComponent(t.title)),t.caption&&(t.caption=tryDecodeURIComponent(t.caption)),t.description&&(t.description=tryDecodeURIComponent(t.description)),t)))),s.setNamespace(`WIDGET ${n.widget.name}`),s.debug("widget options",n.widget.options),I[n.widget.type]&&I[n.widget.type](this._publisherTag,n),this._publisherTag.setWidgetData(n,i),n}_shouldPersistWidgetData(t){const n=t.ads,i=(n?.params?.scenarioId??!1)&&(n?.trace?.length>0||!1);return(t.widget.useLocalCache||L.indexOf(t.widget.type)>-1&&t?.widget?.options?.parseOnlyMode)&&i}async _persistWidgetData(t){const n=await f.encode({created:Date.now(),data:t});try{window.localStorage.setItem(this._storageKey,n)}catch(t){}}async _tryLoadDataFromStorage(){try{s.debug("Trying to load the widget data from local storage...");const t=window.localStorage.getItem(this._storageKey),n=await f.decode(t);if(n){if(Date.now()-Number(n.created)<9e5)return n.data;window.localStorage.removeItem(this._storageKey)}}catch(t){}return s.debug("Local storage widget data not found."),null}_resolveServerUrls(){return this._serverUrl.map((t=>{if(t instanceof Array){const n=Math.round(99*Math.random()),i=t.sort(((t,n)=>t.percentage-n.percentage)),{url:o}=i.find(((t,o)=>{const s=o>0?i[o-1].percentage+t.percentage:t.percentage;return n<s}));return o}return t}))}async _loadDataFromRemote(){const{widgetId:t}=this._params;let n={...this._currentRequestParams};"string"==typeof this._serverUrl?this._serverUrl=[this._serverUrl]:this._serverUrl instanceof Array&&(this._serverUrl=this._resolveServerUrls()),this._params.vdzwServerUrl&&this._serverUrl.unshift(this._params.vdzwServerUrl),this._retryCount++,s.debug(`Loading widget data from remote (retry #${this._retryCount})...`),this._retryCount>1&&(n.retry=this._retryCount-1);const i=await this._getPtrace();n=`trace=${encodeURIComponent(await f.encode(n))}`,i&&(n+=`&ptrace=${i}`);const o=this._serverUrl.map(((i,o)=>`${i}/api/${t}?${n}${o>0?"&fallback=true":""}`));this._publisherTag.timeMarks.setMark("vwpt-server-request",null,!0);let a=null,c=!1;try{a=await getWithFallback(o,!0,[7e3,2e4],(t=>{this._onError(t),c=!0}))}catch(t){}if(a)this._publisherTag.cdnGateway.setRawCampaign(a);else if(c){try{a=await this._publisherTag.cdnGateway.getStaticCampaign(n),this._sendStaticCampaignFallbackEventOnce(),a||E.sendEvent("staticCampaignFallbackEmpty",{userId:this._params.userId,playerId:this._params.widgetId,widget:this._params.widgetId},1,10)}catch(t){this._sendStaticCampaignFallbackEventOnce(),E.sendEvent("staticCampaignFallbackFailed",{userId:this._params.userId,playerId:this._params.widgetId,widget:this._params.widgetId},1,10)}this._staticCampaignFallbackEventSent=!1,this._fetchFromCDN=!0}return this._publisherTag.timeMarks.setMark("vwpt-server-response",null,!0),a&&function isString(t){return"string"==typeof t}(a.trace)&&(a=await f.decode(a.trace)),this._handleResponse(a)}_getPtrace(){return new Promise((t=>{window.setTimeout((()=>{let n="";try{n=window.localStorage.getItem("vdzwopt")||""}catch(t){}finally{t(n)}}),0)}))}_sendStaticCampaignFallbackEventOnce(){this._staticCampaignFallbackEventSent||(this._staticCampaignFallbackEventSent=!0,E.sendEvent("staticCampaignFallback",{userId:this._params.userId,playerId:this._params.widgetId,widget:this._params.widgetId},1,10))}_onError(t){s.debug("Server request error",t),E.sendEvent("widgetServerRequestTimeout",{userId:this._params.userId,playerId:this._params.widgetId,widget:this._params.widgetId,param1:"TIMEOUT"===t?"TIMEOUT":"REQUEST_ERROR"},1,1e3)}async _handleResponse(t){try{this._throwOnInvalidResponse(t)}catch(n){if(s.debug("Failed to load data from remote."),n instanceof EmptyServerResponseError&&this._retryCount<3)return await this._waitForRequestParamsUpdate(),this._loadDataFromRemote();const i=t||null;throw this.dispatch("fetchError",{error:n,response:i}),n}return t}async _waitForRequestParamsUpdate(){s.debug("Retry to load data from widget data from remote in 10s..."),await wait(1e4);const t=await this._createRequestParams();if(s.debug("Done waiting. checking for request params equality..."),((t,n)=>{const i=Object.keys(t),o=Object.keys(n);if(i.length!==o.length)return!1;let s;for(let o=0,a=i.length;o<a;o++)if(s=i[o],t[s]!==n[s])return!1;return!0})(t,this._currentRequestParams))return s.debug("No change in request params."),this._waitForRequestParamsUpdate();s.debug("Request params has been changed..."),this._currentRequestParams=t}_throwOnInvalidResponse(t){if(!t)throw this._initialEmptyResponseSent||(this._initialEmptyResponseSent=!0,E.sendEvent("widgetInitialServerDataResponseEmpty",{userId:this._params.userId,playerId:this._params.widgetId,widget:this._params.widgetId})),new EmptyServerResponseError;if(!t.ads||w.indexOf(t.widget.type)<0&&!t.cms){const n=t.ads?A.CMS:A.ADS;throw new BadServerResponseError(n)}}async _createRequestParams(){const{widgetId:t,...n}=this._params,{timezone:i,offset:o}=this._getTimezoneForRequest(),s=this._getScreenSize(),a=this._getInnerPlayerSize(),c=this._getOuterPlayerSize(),d=this._didLoadTooFrequently?"gallery":"infinity",l=function getTopReferrerDomain(){try{return getDomainFromUrl(getTopWindow().document.referrer)}catch(t){return""}}()||n.utm_source,u=this._getScrollHeight(),h=navigator.maxTouchPoints,p=this._publisherTag.currentScript?.dataset?.rev,g=await this._tryGetLiverampEnvelope();let f={...n,...this._publisherTag.serverPayload,url:encodeURIComponent(getTopPageUrl()),screenSize:s,innerSize:a,outerSize:c,layout:d,referrer:l,scrollHeight:u,maxTouchPoints:h,encodeCms:true,vwptVersion:"2.0.18",timezone:i,timezoneOffset:o,vwptRevision:p,lrEnv:g};void 0!==f.vdzCache&&(f.cacheNew=f.vdzCache);const _=window.sessionStorage.getItem(this._forceWidgetIdStorageKey);return _&&(f.forceWidgetId=_),f}async _tryGetLiverampEnvelope(){try{if(window.ats&&window.ats.retrieveEnvelope){const t=await window.ats.retrieveEnvelope()||"",n=JSON.parse(t);if(n&&n.envelope)return n.envelope}return document.cookie.split("; ").find((t=>startsWith(t,"idl_env=")))?.split("=")[1]}catch(t){return Promise.resolve()}}_getTimezoneForRequest(){let t="";try{t=Intl.DateTimeFormat().resolvedOptions().timeZone}catch(t){}return{timezone:t,offset:(new Date).getTimezoneOffset()}}_getScreenSize(){return`${10*Math.floor(window.screen.width/10)}x${10*Math.floor(window.screen.height/10)}`}_getInnerPlayerSize(){const t=dimensions_rectOf(this._parent),n=getPlayerSize(Math.floor(t.width));return`${n.width}x${n.height}`}_getOuterPlayerSize(){const t=getPlayerSize(getTopWindow().innerWidth);return`${t.width}x${t.height}`}async _parseWidgetOptions(t){if("string"==typeof t){if((t=await this._tryDecodeOptions(t))&&isObject(t))return t;if((t=this._tryJSONParseOptions(t))&&isObject(t))return t}return isObject(t)?t:{}}async _tryDecodeOptions(t){try{return await f.decode(t)||t}catch(n){return t}}_tryJSONParseOptions(t){try{const n=JSON.parse(t);return n&&isObject(n)?n:t}catch(n){return t}}_getScrollHeight(){const t=createDocumentHeightResolver(getTopWindow().document),n=t.resolve();return t.dispose(),n}}class BaseResourceLoadAsyncAction extends d{constructor(t,n,i){super(),this._hostUrl=t,this._parent=n,this._params=i}get shouldSkip(){return!1}decorateScript(t){}onScriptLoadSuccess(){}onScriptLoadError(t){}async execute(){if(this.shouldSkip)return;const t=this.getResourcePath(...arguments),n=document.createElement("script");this.decorateScript(n);try{await injectScript(t,"",this._parent,n,!0),this.onScriptLoadSuccess()}catch(t){throw this.onScriptLoadError(t),this.loadErrorEventName&&E.sendEvent(this.loadErrorEventName,{userId:this._params.userId,playerId:this._params.widgetId,widget:this._params.widgetId}),t}}}class LoadPlayerAsyncAction extends BaseResourceLoadAsyncAction{constructor(t,n,i,o){super(t,n,i),this._publisherTag=o}get loadErrorEventName(){return"vwptPlayerScriptLoadError"}get shouldSkip(){return function includes(t,n){return(t&&"function"==typeof t.indexOf?t:[]).indexOf(n)>-1}(y,this._publisherTag.widgetData.widget.type)}getResourcePath(t){return this.isVdzwPlayerPathValid()?this._params.vdzwPlayerPath:`${this._hostUrl}/basev/${this._getPlayerVersion(t)}/sbt.js`}isVdzwPlayerPathValid(){return!isEmptyOrBlank(this._params.vdzwPlayerPath)&&(!!startsWith(this._params.vdzwPlayerPath,"http://localhost:")||!isEmptyOrBlank(this._params.cdn)&&startsWith(this._params.vdzwPlayerPath,`https://${this._params.cdn}`))}_updateDataPlayerVersion(t){"object"==typeof this._publisherTag.widgetData.ads&&(this._publisherTag.widgetData.playerVersion=t,this._publisherTag.widgetData.ads.version=t)}_getPlayerVersion(t){return"artemis"===t.widget.type&&"1.19.4-a.1"===t.widgetVersion.version?(this._updateDataPlayerVersion("2.0.0-alpha.4"),"2.0.0-alpha.4"):"artemis"===t.widget.type&&"1.19.4-a.2"===t.widgetVersion.version?(this._updateDataPlayerVersion("1.0.917"),"1.0.917"):t.widget?.options?.vwptForcePlayerVersion?t.widget.options.vwptForcePlayerVersion:t.playerVersion}onScriptLoadSuccess(){this._publisherTag.timeMarks.setMark("player-script-load")}}class LoadStdlibAsyncAction extends d{constructor(t,n){super(),this._hostUrl=t,this._parent=n}execute(t){if(t.widget.useStdlib){const n=`__vidazoo_stdlib_${t.widget._id}__`,i=!1,o=!1,s=`${this._hostUrl}/basev${i?"/debug":o?"/stage":""}/stdlib.js?jsonp=${n}`;return new Promise((t=>{window[n]=function(i){delete window[n],t(i)},injectScript(s,"",this._parent)}))}}}class LoadVidazooPublisherTagAsyncAction extends BaseResourceLoadAsyncAction{get loadErrorEventName(){return"vwptVptScriptLoadError"}get shouldSkip(){return!!this._params.skipVpt}getResourcePath(){return`${this._hostUrl}/basev/vptm.js`}}class LoadWidgetScriptAsyncAction extends BaseResourceLoadAsyncAction{constructor(t,n,i,o,s,a){super(t,n,s),this._widgetId=i,this._jsonpCallback=o,this._publisherTag=a}get loadErrorEventName(){return"vwptWidgetScriptLoadError"}decorateScript(t){t.setAttribute("data-widget-id",this._widgetId),t.setAttribute("data-jsonp",this._jsonpCallback)}_getWidgetPath(t){const n=`${this._hostUrl}/basev/wgt`;if("dynamic-script"===t.widget.type){const i=t.widget.useCompiledScript?".min":"";return`${n}/dynamic/${t.widget._id}/${t.widget._id}${i}.js`}return`${n}/${t.widget.type}/${t.widgetVersion.version}/widget.js`}getResourcePath(t){return this.isVdzwPathValid()?this._params.vdzwPath:this._getWidgetPath(t)}isVdzwPathValid(){return!isEmptyOrBlank(this._params.vdzwPath)&&(!!startsWith(this._params.vdzwPath,"http://localhost:")||!isEmptyOrBlank(this._params.cdn)&&startsWith(this._params.vdzwPath,`https://${this._params.cdn}`))}onScriptLoadSuccess(){this._publisherTag.timeMarks.setMark("widget-script-load")}}let C=function(t){return t.Scroll="scroll",t.Timeout="timeout",t.Pixels="pixels",t}({});const k=__webpack_require__(723).Z;class BaseLazyLoadStrategy{constructor(t){this.context=t}}class PixelsStrategy extends BaseLazyLoadStrategy{constructor(){super(...arguments),this.Type=C.Pixels,this._topWindow=void 0,this._pixels=void 0,this._observer=void 0,this._promiseResolver=void 0}run(t){this._topWindow=getTopWindow(),this._pixels=t;const n=this.context.dom.getAnchorElement(this.context.currentScript);return new Promise((i=>{if(this._promiseResolver=i,!n)return void this._resolve();const{top:o}=dimensions_rectOf(n);o<this._topWindow.innerHeight+t?this._resolve():this._observer=function createIntersectionObserver(t,n,i){var o=null;return"IntersectionObserver"in window&&(o=new IntersectionObserver(t,function defaults(t){return tslib_es6_assign({root:null,rootMargin:"0px",threshold:0},t)}(n)),i&&o.observe(i)),o}(this._onIntersectionChange.bind(this),{rootMargin:`${t}px`},n)}))}_onIntersectionChange(t){const{isIntersecting:n,target:i}=t[0];if(assert_isDefined(n))n&&this._resolve();else{const{top:t}=dimensions_rectOf(i);t<this._topWindow.innerHeight+this._pixels&&this._resolve()}}_resolve(){this._observer&&(this._observer.disconnect(),this._observer=null),this._promiseResolver(!0),this._promiseResolver=null}}class ScrollStrategy extends BaseLazyLoadStrategy{constructor(){super(...arguments),this.Type=C.Scroll,this._topWindow=void 0,this._amount=void 0}run(t){this._topWindow=getTopWindow(),this._amount=t;const n=createDocumentHeightResolver(this._topWindow.document),i=n.resolve();return n.dispose(),this._amount>i&&(this._amount=Math.round(i/2)),this._topWindow.scrollY>=this._amount?Promise.resolve(!0):new Promise((t=>{const n=function throttle(t,n){var i,o={current:null};return function throttledFn(){o.current=Array.prototype.slice.apply(arguments),i||(throttledFn.$callCount=0,i=window.setTimeout((function(){i=null,t.apply(this,o.current),throttledFn.$callCount=0}),n)),throttledFn.$callCount++}}((()=>{this._topWindow.scrollY>=this._amount&&(window.removeEventListener("scroll",n),t(!0))}),100);window.addEventListener("scroll",n,{passive:!0})}))}}class TimeoutStrategy extends BaseLazyLoadStrategy{constructor(){super(...arguments),this.Type=C.Timeout}async run(t){return await wait(t),!0}}class DOMEnvironment{constructor(t){this._context=t}getInjectableElement(){if(isFrameContext()&&!this._context.options.get("allowFrame"))return getTopFrameElement().parentElement;const t=this._context.options.get("widgetPosition");if(t){if(t instanceof Array)for(const n of t){const t=document.getElementById(n);if(t)return t}const n=document.getElementById(t);if(n)return n}return this._context.parentScriptElement}getFrameElement(){return getCurrentFrameElement(self.document)}getAnchorElement(t){const n=this._context.options.get("widgetPosition"),getElement=n=>{switch(!0){case"$current"===n:return t.parentElement;case startsWith(n,"/"):const i=document.evaluate(n,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;return i?.parentElement??null;default:return document.querySelector("#"+n)}};if(n instanceof Array){for(const t of n){const n=getElement(t);if(n)return n}return null}return getElement(n)}getWidgetElement(t){const n=this._context.options.get("widgetPosition");if(!n||n instanceof Array&&0===n.length)return s.warn("'widgetPosition' is missing. make sure to set the parameter.\r\nrefer to the documentation for more details."),null;let i;const getElement=n=>{let i;switch(!0){case"$current"===n:i=document.createElement("div"),t.parentNode.insertBefore(i,t);break;case startsWith(n,"/"):const o=document.evaluate(n,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue;o&&(i=document.createElement("div"),o.parentNode.insertBefore(i,o));break;default:i=document.querySelector("#"+n)}return i};if(n instanceof Array){for(const t of n)if(i=getElement(t),i)break}else i=getElement(n);return i&&!i.id&&(i.id="vdzw_"+strings_guid(4)),i}resolvePolyfills(){const t=getTopWindow();isFrameContext()&&t&&("Promise"in t==!1&&(t.Promise=window.Promise),"function"!=typeof window.CustomEvent&&(t.CustomEvent=window.CustomEvent),"URLSearchParams"in t==!1&&(t.URLSearchParams=window.URLSearchParams),"IntersectionObserver"in t==!1&&(t.IntersectionObserver=window.IntersectionObserver),"Symbol"in t==!1&&(t.Symbol=window.Symbol))}}function throwIf(t,n){if(void 0===n&&(n=""),t)throw new Error(n)}const R=["true","false"];class OptionsParser{constructor(t,n){this._context=t,this._parsed=void 0,this._options=void 0,this._config=void 0,this._parsed=!1,this._config=function defaultConfig(t){return{locationAdapterConfig:{},sessionStorageAdapterConfig:{},datasetAdapterConfig:{},...t}}(n)}get current(){return throwIf(!this._parsed,"get options before options parsed."),this._options}_parseAdapterOptions(t,n){const{exclude:i=[]}=n;for(let n=0,o=i.length;n<o;n++)delete t[i[n]];return t}_getOptionsFromLocation(t){return this._parseAdapterOptions(parseQueryString(getTopWindow().location.search),t)}_getOptionsFromScript(t){return this._parseAdapterOptions(this._context.currentScript.dataset,t)}_getOptionsFromSessionStorage(t){try{const n=sessionStorage.getItem("vdzwOptions"),i=JSON.parse(n);return this._parseAdapterOptions(i,t)}catch(t){return{}}}parse(){if(this._parsed)return this;const t=this._getOptionsFromLocation(this._config.locationAdapterConfig),n=this._getOptionsFromScript(this._config.datasetAdapterConfig);return this._options=function defaultOptions(t){return{userId:v,loadFrequentlyTime:6e4,parallel:!1,unique:!1,allowFrame:!1,vdzwLocalCache:!0,gdprEnforcement:!1,skipVpt:!0,...t}}({...n,...t}),this._options.replaceWidgetId&&this._options.replaceWidgetId!==n.widgetId&&(this._options.widgetId=n.widgetId),this._castBooleanValues(),this._parsed=!0,this}set(t,n){return throwIf(!this._parsed,"set before options parsed."),this._options[t]=n,this}extend(t){this._options={...this._options,...t}}get(t,n){return throwIf(!this._parsed,"get before options parsed."),assert_isDefined(this._options[t])?this._options[t]:n}_castBooleanValues(){const t=Object.keys(this._options);let n;for(let i=0,o=t.length;i<o;i++)n=this._options[t[i]],R.indexOf(n)>-1&&(this._options[t[i]]="true"===n)}}function injectStyleRules(t,n){void 0===n&&(n=document);var i=document.createElement("style");return i.innerHTML=t.replace(/\n/g,""),n instanceof Document||"HTMLDocument"===n.constructor.name?n.head.appendChild(i):n.appendChild(i),i}function createStyleSheet(t,n){for(var i="",o={},s=Object.keys(t).sort((function(t,n){return t.indexOf(":")})).reduce((function(n,s){var a="_".concat(strings_guid(5));if(!0==(0===s.indexOf("@keyframes"))){var c=s.replace("@keyframes ","");o[c]=a,i+="@keyframes ".concat(a," {\n\t\t\t\t\t").concat(t[s],"\n\t\t\t\t}\n\t\t\t\t")}else{if(s.indexOf(":")>-1){var d=tslib_es6_read(s.split(":")),l=d[0],u=d.slice(1);n[l]&&(a="".concat(n[l])),a+=":".concat(u.join(":"))}n[s]=a,i+=".".concat(n[s]," {\n\t\t\t\t\t").concat(t[s],"\n\t\t\t\t}\n\t\t\t\t")}return n}),{}),a=Object.keys(o),c=0,d=a.length;c<d;c++)i=i.replace(new RegExp(a[c],"g"),o[a[c]]);var l=injectStyleRules(i,n);return s.getStyleSheet=function(){return l},s}const O=createStyleSheet({"@keyframes load8":"\n        0% {\n            -webkit-transform: rotate(0deg);\n            transform: rotate(0deg);\n        }\n        100% {\n            -webkit-transform: rotate(360deg);\n            transform: rotate(360deg);\n        }\n    ",loader:"\n        position: relative;\n        border-radius: 50%;\n        width: 32px;\n        height: 32px;\n        z-index: 2;\n        font-size: 10px;\n        position: relative;\n        border-top: 3px solid rgba(255, 255, 255, 0.2);\n        border-right: 3px solid rgba(255, 255, 255, 0.2);\n        border-bottom: 3px solid rgba(255, 255, 255, 0.2);\n        border-left: 3px solid #ffffff;\n        -webkit-transform: translateZ(0);\n        -ms-transform: translateZ(0);\n        transform: translateZ(0);\n        -webkit-animation: load8 0.7s infinite linear;\n        animation: load8 0.7s infinite linear;\n    ","loader::after":"\n        border-radius: 50%;\n        width: 32px;\n        height: 32px;\n    "});class CDNGateway{constructor(t){this._context=t,this._rawCampaign=void 0,this._didHandleEligibleCampaign=void 0}setRawCampaign(t){(!0===this._context.options.get("vdzwAlwaysHandleEligibleCampaign",!1)||isValidRandom(10))&&(this._rawCampaign=t)}async getStaticCampaign(t){const n=this._getCDNGatewayCampaignUrls("read",t);let i=null;try{i=await getWithFallback(n,!0)}catch(t){}return i}async handleEligibleCampaign(){if(this._rawCampaign&&!this._didHandleEligibleCampaign){this._didHandleEligibleCampaign=!0;let t=!1;try{t=await this._shouldPostCampaign(),t||E.sendEvent("skipPostStaticCampaign",{userId:this._context.options.get("userId"),playerId:this._context.options.get("widgetId"),widget:this._context.options.get("widgetId")},1,1e3)}catch(t){}if(t){const t=this._getCDNGatewayCampaignUrls("write");try{await postWithFallback(t,this._rawCampaign,!0)}catch(t){s.debug("Failed to post eligible campaign to cdn gateway")}}}this._rawCampaign=null}_getStaticCampaignUrl(){return`https://static.vidazoo.com/vdz-fb/${this._rawCampaign.cgk}.json`}_getCDNGatewayCampaignUrls(t,n){return this._getCDNGatewayUrls(t).map((t=>`${t}/campaign/${this._context.originalWidgetId}${n?"?"+n:""}`))}_getCDNGatewayUrls(t){const n="read"===t?k.cdnGatewayReadUrl:k.cdnGatewayWriteUrl;let i=[];return"string"==typeof n?i=[n]:n instanceof Array&&(i=this._resolveCDNGatewayUrls(n)),i}_resolveCDNGatewayUrls(t){return t.map((t=>{if(t instanceof Array){const n=Math.round(99*Math.random()),i=t.sort(((t,n)=>t.percentage-n.percentage)),{url:o}=i.find(((t,o)=>{const s=o>0?i[o-1].percentage+t.percentage:t.percentage;return n<s}));return o}return t}))}async _shouldPostCampaign(){return new Promise((t=>{const n=this._getStaticCampaignUrl(),i=new XMLHttpRequest;i.open("HEAD",n,!0),i.addEventListener("error",(()=>t(!0))),i.addEventListener("readystatechange",(()=>{if(i.readyState===XMLHttpRequest.DONE){const n=i.getResponseHeader("last-modified");if(i.status<400&&i.status>=200&&n){const i=new Date(n).getTime();Date.now()-i>864e5?t(!0):t(!1)}else t(!0)}})),i.send()}))}}class SessionManager{constructor(t){this._context=t,this._loadedTooFrequently=void 0}initialize(){const t=this._context.options.get("loadFrequentlyTime"),n=this._lastLoad,i=Date.now();this._loadedTooFrequently=!!n&&i-n<t,this._lastLoad=i}get didLoadTooFrequently(){return this._loadedTooFrequently}get _lasLoadStorageKey(){return`vdzwll_${this._context.widgetId}`}get _lastLoad(){return this._getStorage(this._lasLoadStorageKey,Number)}set _lastLoad(t){this._setStorage(this._lasLoadStorageKey,t)}_getStorage(t,n){try{const i=sessionStorage.getItem(t);if(!i)throw new Error("entry not found");return n(i)}catch(t){return null}}_setStorage(t,n){try{"object"==typeof n&&(n=JSON.stringify(n)),sessionStorage.setItem(t,n)}catch(t){}}}class WidgetPublisherTag extends a{constructor(t,n,i,o,s){super(),this._loadTime=n,this._initScrollY=i,this._tcfLoaded=o,this.serverPayload=s,this.options=void 0,this.dom=void 0,this.cdnGateway=void 0,this.session=void 0,this.currentScript=void 0,this.parentScriptElement=void 0,this.widgetData=void 0,this.timeMarks=void 0,this.stdlib=void 0,this.id=void 0,this._currentUrl=void 0,this._readyState=void 0,this._jsonpCallback=void 0,this._widgetInitializer=void 0,this._placeholder=void 0,this._originalWidgetId=void 0,this._isValidExtensionRuntime=void 0,this._hasDemand=void 0,this.id=strings_guid(4),this.timeMarks=new c,this.timeMarks.setMark("vwpt-load-time",n),this.currentScript=t,this.parentScriptElement=this.currentScript.parentElement,this.options=new OptionsParser(this,{locationAdapterConfig:{exclude:m}}),this.dom=new DOMEnvironment(this),this.cdnGateway=new CDNGateway(this),this.session=new SessionManager(this),this.widgetData=null,this._readyState="unset"}get version(){return"2.0.18"}get hasPlaceholder(){return!!this._placeholder}get placeholder(){return this._placeholder}get initScrollY(){return this._initScrollY}get tcfLoaded(){return this._tcfLoaded}get loadTime(){return this._loadTime}get userId(){return this.options.get("userId")}get originalWidgetId(){return this._originalWidgetId}get widgetId(){return this.options.get("widgetId")}get readyState(){return this._readyState}_setReadyState(t){this._readyState=t,this.dispatch("readyStateChanged",this._readyState)}_isReadyState(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];return n.indexOf(this._readyState)>-1}async initialize(){this._setValidExtensionRuntime(),this.options.parse(),this._handlePlaceholder(),this._scriptLoad(),this._setTimeOnPageEvent(),this.session.initialize(),this._setupLogger(),this.dom.resolvePolyfills(),this._originalWidgetId=this.options.current.widgetId,this._jsonpCallback=this.options.get("vdzwJsonpCallback",`__vdzw_${this.widgetId}_${this.id}_jsonp_`),this._currentUrl=function parseUrl(t){var n=document.createElement("a");return n.href=t,{host:n.host,hostname:n.hostname,pathname:n.pathname,hash:n.hash,protocol:n.protocol,origin:n.origin,port:n.port,search:n.search}}(this.currentScript.src),this.options.get("cdn")||this.options.set("cdn",this._currentUrl.host),s.info(`vidazoo widget created ${this.widgetId}`),s.debug("parsed options",this.options.current)}_setValidExtensionRuntime(){try{const t=sessionStorage.getItem("__VDZ_DEVTOOLS_RUNTIME__");this._isValidExtensionRuntime=Date.now()-g.decode(t).time<36e5}catch(t){this._isValidExtensionRuntime=!1}}createWidgetOptions(t){return{...t,...this.widgetData.widget.options,...this.options.current}}removePlaceholder(){this._placeholder&&this._placeholder.parentElement&&(this._placeholder.parentElement.removeChild(this._placeholder),this._placeholder=null)}setWidgetData(t,n){this.widgetData=t,this._hasDemand=n}_handlePlaceholder(){if(this.options.get("usePlaceholder")&&this.options.get("widgetPosition")){const t=this.options.get("placeholderRatio",16/9),n=this.dom.getAnchorElement(this.currentScript);let i;if(!n||!(i=n.offsetWidth))return;const{width:o,height:s}=getPlayerSize(i,t),a=this._placeholder=document.createElement("div");a.style.cssText=`width:${o}px;height:${s}px;background-color:#000;display:flex;align-items:center;justify-content:center;`,a.setAttribute("data-vdzw-placeholder","true"),a.innerHTML=`<div class="${O.loader}"></div>`,n.appendChild(a)}}_scriptLoad(){const t=this.options.get("widgetId");E.sendEvent("widgetLoad",{userId:this.options.get("userId"),playerId:t,widget:t,param1:"2.0.18"},1,100)}_setupLogger(){let n=t.Silent;const i=this.options.get("vdzwLogLevel"),o=this.options.get("vdzwDebug");this._isValidExtensionRuntime&&(i&&i in _?n=_[i]:o&&(n=t.Debug)),s.setLogLevel(n),s.setNamespace(`WIDGET ${this.widgetId}`)}async load(){if(!this._isReadyState("loading","done")){this._setReadyState("loading"),await function documentReady(t){return void 0===t&&(t=document),documentReadyState("interactive",t)}();try{this.options.get("parallel")?await this._loadAsParallel():await this._loadAsLazy(),this._setReadyState("done")}catch(t){s.error("widget load failed with error",t),this._setReadyState("error")}}}_setTimeOnPageEvent(){const t=this.userId,n=this.widgetId;window.setTimeout((()=>{E.sendEvent("widgetTimeOnPage",{userId:t,playerId:n,widget:n},1,100)}),1e4)}async _loadAsLazy(){this.widgetData=await this._createFetchWidgetDataAsyncAction().execute(),this.options.extend(this.widgetData.widget.options);const{strategy:t,value:n,enabled:i,relativeToDocumentState:o}=this.widgetData?.widget?.lazyLoad??{};let s;switch(i&&o&&await documentReadyState(o),t){case C.Scroll:s=new ScrollStrategy(this);break;case C.Timeout:s=new TimeoutStrategy(this);break;case C.Pixels:s=new PixelsStrategy(this)}if(!s||!i||await s.run(n))return this._loadAsParallel()}async _loadAsParallel(){getTopWindow()[this._jsonpCallback]=this._onWidgetScriptLoad.bind(this);const[t,n]=await this._createParallelLoadSaga();this.widgetData=t,this.stdlib=n,this.options.set("userId",this.widgetData.widget.user),this.options.set("widgetId",this.widgetData.widget._id),s.debug("widget data load",this.widgetData),this.widgetData.widget.options&&this.options.extend(this.widgetData.widget.options)}async _onWidgetScriptLoad(t){this._widgetInitializer=t;if(delete getTopWindow()[this._jsonpCallback],this._isReadyState("done"))this._executeWidgetInitializer();else{const onReadyStateChange=async t=>{this._isReadyState("done")&&(this.un("readyStateChanged",onReadyStateChange),this._executeWidgetInitializer())};this.on("readyStateChanged",onReadyStateChange)}}async _executeWidgetInitializer(){setTimeout((async()=>{const t=getTopWindow();if(t._vdzwgt_&&t._vdzwgt_.loaded_widgets||(s.debug("unique widgets DB (_vdzwgt_) not found."),t._vdzwgt_={loaded_widgets:{}}),this.options.current.unique&&t._vdzwgt_.loaded_widgets[this._originalWidgetId])return;t._vdzwgt_.loaded_widgets[this._originalWidgetId]=!0;const n=this.widgetData.adsData,i=n&&n.params||{};E.sendEvent("widgetPreExecute",i,1,100);const o=await this._widgetInitializer(this,s,this.stdlib);E.sendEvent("widgetPostExecute",i,1,100),this._invokeWidgetCreated(o),this._hasDemand&&this.cdnGateway.handleEligibleCampaign()}))}_invokeWidgetCreated(t){const n=this.options.get("widgetCreated");n in window&&"function"==typeof window[n]&&window[n](t)}_createFetchWidgetDataAsyncAction(){if(this.widgetData)return new l((()=>Promise.resolve(this.widgetData)));const t=this.dom.getInjectableElement(),n=new FetchWidgetDataAsyncAction(k.adServerUrl,this.options.current,t,this.session.didLoadTooFrequently,this);return n.on("fetchError",this._onServerFetchError.bind(this)),n}_onServerFetchError(t){switch(!0){case t.detail.error instanceof BadServerResponseError:E.sendEvent("widgetServerDataResponseError",{param1:t.detail.error.code,userId:t.detail.response.widget.user,playerId:this.widgetId,widget:this.widgetId});break;case t.detail.error instanceof EmptyServerResponseError:E.sendEvent("widgetServerDataResponseEmpty",{userId:this.options.get("userId"),playerId:this.widgetId,widget:this.widgetId})}}async _createParallelLoadSaga(){const t=this.dom.getInjectableElement(),n=`https://${this.options.get("cdn")}`,i=u.compose(u.compose(this._createFetchWidgetDataAsyncAction(),u.compose(new LoadPlayerAsyncAction(n,t,this.options.current,this),new LoadWidgetScriptAsyncAction(n,t,this.widgetId,this._jsonpCallback,this.options.current,this),new LoadStdlibAsyncAction(n,t)).toParallelAsyncAction()).toSeriesAsyncAction(),new LoadVidazooPublisherTagAsyncAction(n,t,this.options.current)),[o,,,s]=await i.execParallel();return[o,s]}}const T=getTopWindow(),D=T.performance.now(),z=T.scrollY,F=T._vdzwgt_=T._vdzwgt_||{loaded_widgets:{}};let W=!1,M=!1;let j=function script_currentScript(t,n){return void 0===t&&(t=document),t.currentScript?t.currentScript:n?document.querySelector(n):null}();if(!j&&"function"==typeof window.__getVidazooShadowRoot__){const t=window.__getVidazooShadowRoot__();j=t.querySelector('script[src*="/vwpt.js"][data-allow-shadow-root="true"]:not([data-parse])')}!async function(){const n=j.dataset.rev;n&&E.extendGlobalJSONParams({vwptRevision:n});const i="true"===j.dataset.paramUserGdpr,o=j.dataset.paramUserConsentStr,a=!i||!o,c="true"===parseQueryString(T.location.href).vdzwDebug,d=("false"!==j.dataset.gdprEnforcement||T.document.URL.indexOf("vdzwGdprEnf=true"),"false"!==j.dataset.waitForTcString||T.document.URL.indexOf("vdzwWaitForTcString=true"),"true"===j.dataset.waitForGppString||T.document.URL.indexOf("vdzwWaitForGppString=true")>-1),l={userId:v,playerId:j.dataset.widgetId,widget:j.dataset.widgetId};async function handleConsent(){const t=[injectScript("https://static.vidazoo.com/basev/cmp/1.0.1/cmp.js","vdzcmp"),Promise.resolve()];await Promise.all(t),loadWidget()}async function loadWidget(t){M||(M=!0,setTimeout((async()=>{if(!j.dataset.widgetId){const t=document.querySelector('script[src*="vwpt"][data-widget-id]:not([data-parse="true"])');if(t){const n=document.createElement("script");for(let i=0,o=t.attributes.length;i<o;i++){const{name:o,value:s}=t.attributes[i];n.setAttribute(o,s)}return void t.replaceWith(n)}return void(c&&s.error("`data-widget-id` attribute is missing on vwpt script. aborting widget."))}j.setAttribute("data-parse","true");const n={},l=window.vdzCmp.create({waitForGPPString:d}),u=await l.getGPPString(),h=t?.cmpService.tcfapiExists?await(t?.cmpService.getTcStringData()):null;u&&(n.userGppStr=u),null!==h?(n.userGdpr=h.gdprApplies,n.userConsentStr=h.tcString):a||(n.userGdpr=i,n.userConsentStr=o);const p=new WidgetPublisherTag(j,D,z,W,n);await function yieldToMain(){return document.hidden?Promise.resolve():wait(0)}(),p.initialize();const{widgetId:g,unique:f}=p.options.current;f&&F.loaded_widgets[g]||p.load()})))}c&&s.setLogLevel(t.Debug).setNamespace("Publisher Tag"),!function allFeaturesSupported(){return window.Promise&&window.IntersectionObserver&&window.Symbol&&Element.prototype.replaceWith}()?(E.sendEvent("vwptPolyfillsLoaded",l,1,10),function injectScriptCallback(t,n,i,o,s,a,c){void 0===n&&(n=""),void 0===i&&(i=document.head),(o=o||document.createElement("script")).id=n,o.src=t,o.addEventListener("load",(function(){return a&&a()})),o.addEventListener("error",(function(t){return c&&c(t)})),s&&i.prepend?i.prepend(o):i.appendChild(o)}("https://cdn.polyfill.io/v3/polyfill.min.js?features=document.currentScript%2CElement.prototype.replaceWith%2CIntersectionObserver%2CSymbol%2CPromise%2CCustomEvent","",document.head,null,!1,handleConsent)):handleConsent()}()})()})();